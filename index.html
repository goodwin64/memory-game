<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Memory game</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Faker/3.1.0/faker.min.js"
            integrity="sha512-/seDHxVfh1NvFUscAj8GsHQVZJvr2jjAoYsNL7As2FCaFHUHYIarl3sRCvVlFgyouVNiRgHIebyLKjpgd1SLDw=="
            crossorigin="anonymous"></script>
</head>
<body>

<style>
    * {
        transition: all 100ms ease-in;
    }

    .row {
        display: flex;
        justify-content: center;
    }

    .cell {
        width: 100px;
        height: 100px;
        border: 1px solid;
        margin: 0 3px 3px 0;
    }

    #win {
        font-size: 100px;
        text-align: center;
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
    }
</style>

<div class="row">
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
</div>
<div class="row">
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
</div>
<div class="row">
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
</div>
<div class="row">
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
</div>

<div id="win" hidden>You win!</div>

<script data-id="helpers">
  function shuffle(array) {
    return [...array].sort(() => Math.random() - 0.5);
  }

  function randInt(min = 0, max = 0) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function generateColor() {
    const [r, g, b] = [
      randInt(0, 255),
      randInt(0, 255),
      randInt(0, 255),
    ];
    return `rgb(${r},${g},${b})`;
  }
</script>

<script>

  function generateColors(cells) {
    const shuffledUnusedCells = shuffle(cells);
    return new Array(cells.length / 2)
      .fill(0)
      .map(generateColor)
      .reduce((acc, curr) => {
        const twoCells = [];
        twoCells.push(shuffledUnusedCells.pop());
        twoCells.push(shuffledUnusedCells.pop());
        return {
          ...acc,
          [curr]: twoCells,
        };
      }, {});
  }

  function paintAllCells(colors) {
    Object
      .entries(colors)
      .forEach(([color, cells]) => {
        cells.forEach(cell => {
          cell.style.backgroundColor = color;
        });
      });
  }

  function clearAllCells(cells) {
    cells.forEach(cell => cell.style.backgroundColor = '');
  }

  const cells = [...document.querySelectorAll('.cell')];

  const colors = generateColors(cells);

  paintAllCells(colors);

  setTimeout(() => {
    clearAllCells(cells);
  }, 2000);
  // addClickLogic(cells);

</script>

</body>
</html>
